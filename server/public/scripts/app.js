"use strict";function initialiseState(){return"PushManager"in window?"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?void console.log("The user has blocked notifications."):void navigator.serviceWorker.ready.then(function(n){n.pushManager.getSubscription().then(function(n){return n?(sendSubscriptionToServer(n),pushButton.textContent="Disable Push Messages",isPushEnabled=!0,void 0):(pushButton.textContent="Enable Push Messages",void(pushButton.disabled=!1))})["catch"](function(n){console.log("Error during getSubscription()",n)})}):void console.log("Notifications aren't supported."):void console.log("Push messaging isn't supported.")}function subscribe(){pushButton.disabled=!0,navigator.serviceWorker.ready.then(function(n){n.pushManager.subscribe({userVisibleOnly:!0}).then(function(n){return isPushEnabled=!0,pushButton.textContent="Disable Push Messages",pushButton.disabled=!1,sendSubscriptionToServer(n)})["catch"](function(n){"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),pushButton.disabled=!0):(console.log("Unable to subscribe to push.",n),pushButton.disabled=!1,pushButton.textContent="Enable Push Messages")})})}function unsubscribe(){pushButton.disabled=!0,navigator.serviceWorker.ready.then(function(n){n.pushManager.getSubscription().then(function(n){return n?void n.unsubscribe().then(function(){pushButton.disabled=!1,pushButton.textContent="Enable Push Messages",isPushEnabled=!1})["catch"](function(n){console.log("Unsubscription error: ",n),pushButton.disabled=!1}):(isPushEnabled=!1,pushButton.disabled=!1,void(pushButton.textContent="Enable Push Messages"))})["catch"](function(n){console.log("Error thrown while unsubscribing from push messaging.",n)})})}function endpointWorkaround(n){if(0!==n.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return n.endpoint;var e=n.endpoint;return n.subscriptionId&&-1===n.endpoint.indexOf(n.subscriptionId)&&(e=n.endpoint+"/"+n.subscriptionId),e}function sendSubscriptionToServer(n){console.log(n);var e=endpointWorkaround(n);socket.emit("New Subscription",e),console.log("TODO: Implement sendSubscriptionToServer()",e)}var isPushEnabled=!1,pushButton=document.querySelector(".js-push-button"),socket=io.connect("subscribe-notify.herokuapp.com");window.addEventListener("load",function(){pushButton.addEventListener("click",function(){isPushEnabled?unsubscribe():subscribe()}),"serviceWorker"in navigator?navigator.serviceWorker.register("./sw.js").then(initialiseState):console.log("Service workers aren't supported in this browser.")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW5pdGlhbGlzZVN0YXRlIiwid2luZG93IiwiU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiIsInByb3RvdHlwZSIsIk5vdGlmaWNhdGlvbiIsInBlcm1pc3Npb24iLCJjb25zb2xlIiwibG9nIiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwidGhlbiIsInNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24iLCJwdXNoTWFuYWdlciIsImdldFN1YnNjcmlwdGlvbiIsInB1c2hTdWJzY3JpcHRpb24iLCJzZW5kU3Vic2NyaXB0aW9uVG9TZXJ2ZXIiLCJwdXNoQnV0dG9uIiwidGV4dENvbnRlbnQiLCJpc1B1c2hFbmFibGVkIiwiZGlzYWJsZWQiLCJlcnIiLCJzdWJzY3JpYmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlIiwidW5zdWJzY3JpYmUiLCJlbmRwb2ludFdvcmthcm91bmQiLCJlbmRwb2ludCIsImluZGV4T2YiLCJtZXJnZWRFbmRwb2ludCIsInN1YnNjcmlwdGlvbklkIiwic29ja2V0IiwiZW1pdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlvIiwiY29ubmVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWdpc3RlciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFzQkEsU0FBQUEsbUJBRUEsTUFBQSxlQUFBQyxRQUtBLG9CQUFBQywyQkFBQUMsVUFLQSxXQUFBQyxhQUFBQyxlQUNBQyxTQUFBQyxJQUFBLDJDQUtBQyxXQUFBQyxjQUFBQyxNQUFBQyxLQUFBLFNBQUFDLEdBRUFBLEVBQUFDLFlBQUFDLGtCQUFBSCxLQUFBLFNBQUFJLEdBQ0EsTUFBQUEsSUFLQUMseUJBQUFELEdBQ0FFLFdBQUFDLFlBQUEsd0JBQ0FDLGVBQUEsRUFGQUgsU0FKQUMsV0FBQUMsWUFBQSw0QkFDQUQsV0FBQUcsVUFBQSxNQUhBUixTQVVBLFNBQUFTLEdBQ0FmLFFBQUFDLElBQUEsaUNBQUFjLFdBdkJBZixTQUFBQyxJQUFBLHVDQUxBRCxTQUFBQyxJQUFBLG1DQWlDQSxRQUFBZSxhQUdBTCxXQUFBRyxVQUFBLEVBRUFaLFVBQUFDLGNBQUFDLE1BQUFDLEtBQUEsU0FBQUMsR0FDQUEsRUFBQUMsWUFBQVMsV0FBQUMsaUJBQUEsSUFBQVosS0FBQSxTQUFBSSxHQUtBLE1BSEFJLGdCQUFBLEVBQ0FGLFdBQUFDLFlBQUEsd0JBQ0FELFdBQUFHLFVBQUEsRUFDQUoseUJBQUFELEtBTEFILFNBTUEsU0FBQVksR0FDQSxXQUFBcEIsYUFBQUMsWUFDQUMsUUFBQUMsSUFBQSwyQ0FDQVUsV0FBQUcsVUFBQSxJQUVBZCxRQUFBQyxJQUFBLCtCQUFBaUIsR0FDQVAsV0FBQUcsVUFBQSxFQUNBSCxXQUFBQyxZQUFBLDRCQU1BLFFBQUFPLGVBQ0FSLFdBQUFHLFVBQUEsRUFFQVosVUFBQUMsY0FBQUMsTUFBQUMsS0FBQSxTQUFBQyxHQUdBQSxFQUFBQyxZQUFBQyxrQkFBQUgsS0FBQSxTQUFBSSxHQUVBLE1BQUFBLE9BY0FBLEdBQUFVLGNBQUFkLEtBQUEsV0FDQU0sV0FBQUcsVUFBQSxFQUNBSCxXQUFBQyxZQUFBLHVCQUNBQyxlQUFBLElBSEFKLFNBSUEsU0FBQVMsR0FDQWxCLFFBQUFDLElBQUEseUJBQUFpQixHQUNBUCxXQUFBRyxVQUFBLEtBakJBRCxlQUFBLEVBQ0FGLFdBQUFHLFVBQUEsT0FDQUgsV0FBQUMsWUFBQSwyQkFQQU4sU0F3QkEsU0FBQVksR0FDQWxCLFFBQUFDLElBQUEsd0RBQUFpQixPQVFBLFFBQUFFLG9CQUFBWCxHQUVBLEdBQUEsSUFBQUEsRUFBQVksU0FBQUMsUUFBQSwyQ0FDQSxNQUFBYixHQUFBWSxRQUdBLElBQUFFLEdBQUFkLEVBQUFZLFFBT0EsT0FKQVosR0FBQWUsZ0JBQUEsS0FBQWYsRUFBQVksU0FBQUMsUUFBQWIsRUFBQWUsa0JBRUFELEVBQUFkLEVBQUFZLFNBQUEsSUFBQVosRUFBQWUsZ0JBRUFELEVBR0EsUUFBQWIsMEJBQUFELEdBSUFULFFBQUFDLElBQUFRLEVBQ0EsSUFBQWMsR0FBQUgsbUJBQUFYLEVBQ0FnQixRQUFBQyxLQUFBLG1CQUFBSCxHQUNBdkIsUUFBQUMsSUFBQSw2Q0FBQXNCLEdBL0lBLEdBQUFWLGdCQUFBLEVBQ0FGLFdBQUFnQixTQUFBQyxjQUFBLG1CQUNBSCxPQUFBSSxHQUFBQyxRQUFBLGlDQUVBbkMsUUFBQW9DLGlCQUFBLE9BQUEsV0FDQXBCLFdBQUFvQixpQkFBQSxRQUFBLFdBQ0FsQixjQUNBTSxjQUVBSCxjQUlBLGlCQUFBZCxXQUNBQSxVQUFBQyxjQUFBNkIsU0FBQSxXQUFBM0IsS0FBQVgsaUJBRUFNLFFBQUFDLElBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNQdXNoRW5hYmxlZCA9IGZhbHNlO1xudmFyIHB1c2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcHVzaC1idXR0b24nKTtcbnZhciBzb2NrZXQgPSBpby5jb25uZWN0KCdzdWJzY3JpYmUtbm90aWZ5Lmhlcm9rdWFwcC5jb20nKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gIHB1c2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzUHVzaEVuYWJsZWQpIHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YnNjcmliZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignLi9zdy5qcycpLnRoZW4oaW5pdGlhbGlzZVN0YXRlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXJzIGFyZW5cXCd0IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuJyk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBpbml0aWFsaXNlU3RhdGUoKSB7XG4gIC8vIENoZWNrIGlmIHB1c2ggbWVzc2FnaW5nIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxuICBpZiAoISgnUHVzaE1hbmFnZXInIGluIHdpbmRvdykpIHtcbiAgICBjb25zb2xlLmxvZygnUHVzaCBtZXNzYWdpbmcgaXNuXFwndCBzdXBwb3J0ZWQuJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIENoZWNrIGlmIG5vdGlmaWNhdGlvbnMgYXJlIHN1cHBvcnRlZCBpbiB0aGUgc2VydmljZSB3b3JrZXJcbiAgaWYgKCEoJ3Nob3dOb3RpZmljYXRpb24nIGluIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlKSkge1xuICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb25zIGFyZW5cXCd0IHN1cHBvcnRlZC4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gQ2hlY2sgaWYgZm9yIHB1c2ggbm90aWZpY2F0aW9ucyBwZXJtaXNzaW9uIGhhdmUgYmVlbiBkZW5pZWRcbiAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVuaWVkJykge1xuICAgIGNvbnNvbGUubG9nKCdUaGUgdXNlciBoYXMgYmxvY2tlZCBub3RpZmljYXRpb25zLicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFdlIG5lZWQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiB0byBjaGVjayBmb3IgYSBzdWJzY3JpcHRpb25cbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAoc2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikge1xuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBwdXNoIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uc1xuICAgIHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCkudGhlbihmdW5jdGlvbiAocHVzaFN1YnNjcmlwdGlvbikge1xuICAgICAgaWYgKCFwdXNoU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHB1c2hCdXR0b24udGV4dENvbnRlbnQgPSAnRW5hYmxlIFB1c2ggTWVzc2FnZXMnO1xuICAgICAgICBwdXNoQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRTdWJzY3JpcHRpb25Ub1NlcnZlcihwdXNoU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgcHVzaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdEaXNhYmxlIFB1c2ggTWVzc2FnZXMnO1xuICAgICAgICBpc1B1c2hFbmFibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3IgZHVyaW5nIGdldFN1YnNjcmlwdGlvbigpJywgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZSgpIHtcbiAgLy8gRGlzYWJsZSB0aGUgYnV0dG9uIHNvIGl0IGNhbid0IGJlIGNoYW5nZWQgd2hpbGVcbiAgLy8gcHVzaCBwZXJtaXNzaW9ucyBhcmUgcHJvY2Vzc2VkXG4gIHB1c2hCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXG4gIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oZnVuY3Rpb24gKHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pIHtcbiAgICBzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7IHVzZXJWaXNpYmxlT25seTogdHJ1ZSB9KS50aGVuKGZ1bmN0aW9uIChwdXNoU3Vic2NyaXB0aW9uKSB7XG4gICAgICAvLyBUaGUgc3Vic2NyaXB0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgICBpc1B1c2hFbmFibGVkID0gdHJ1ZTtcbiAgICAgIHB1c2hCdXR0b24udGV4dENvbnRlbnQgPSAnRGlzYWJsZSBQdXNoIE1lc3NhZ2VzJztcbiAgICAgIHB1c2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBzZW5kU3Vic2NyaXB0aW9uVG9TZXJ2ZXIocHVzaFN1YnNjcmlwdGlvbik7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2RlbmllZCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Blcm1pc3Npb24gZm9yIE5vdGlmaWNhdGlvbnMgd2FzIGRlbmllZCcpO1xuICAgICAgICBwdXNoQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gc3Vic2NyaWJlIHRvIHB1c2guJywgZSk7XG4gICAgICAgIHB1c2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgcHVzaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdFbmFibGUgUHVzaCBNZXNzYWdlcyc7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgcHVzaEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAoc2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikge1xuICAgIC8vIFRvIHVuc3Vic2NyaWJlIGZyb20gcHVzaCBtZXNzYWdpbmcsIHlvdSBuZWVkIGdldCB0aGVcbiAgICAvLyBzdWJjcmlwdGlvbiBvYmplY3QsIHdoaWNoIHlvdSBjYW4gY2FsbCB1bnN1YnNjcmliZSgpIG9uLlxuICAgIHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCkudGhlbihmdW5jdGlvbiAocHVzaFN1YnNjcmlwdGlvbikge1xuICAgICAgLy8gQ2hlY2sgd2UgaGF2ZSBhIHN1YnNjcmlwdGlvbiB0byB1bnN1YnNjcmliZVxuICAgICAgaWYgKCFwdXNoU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIC8vIE5vIHN1YnNjcmlwdGlvbiBvYmplY3QsIHNvIHNldCB0aGUgc3RhdGVcbiAgICAgICAgLy8gdG8gYWxsb3cgdGhlIHVzZXIgdG8gc3Vic2NyaWJlIHRvIHB1c2hcbiAgICAgICAgaXNQdXNoRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBwdXNoQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHB1c2hCdXR0b24udGV4dENvbnRlbnQgPSAnRW5hYmxlIFB1c2ggTWVzc2FnZXMnO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IE1ha2UgYSByZXF1ZXN0IHRvIHlvdXIgc2VydmVyIHRvIHJlbW92ZVxuICAgICAgLy8gdGhlIHVzZXJzIGRhdGEgZnJvbSB5b3VyIGRhdGEgc3RvcmUgc28geW91XG4gICAgICAvLyBkb24ndCBhdHRlbXB0IHRvIHNlbmQgdGhlbSBwdXNoIG1lc3NhZ2VzIGFueW1vcmVcblxuICAgICAgLy8gV2UgaGF2ZSBhIHN1YmNyaXB0aW9uLCBzbyBjYWxsIHVuc3Vic2NyaWJlIG9uIGl0XG4gICAgICBwdXNoU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHB1c2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgcHVzaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdFbmFibGUgUHVzaCBNZXNzYWdlcyc7XG4gICAgICAgIGlzUHVzaEVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVbnN1YnNjcmlwdGlvbiBlcnJvcjogJywgZSk7XG4gICAgICAgIHB1c2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3IgdGhyb3duIHdoaWxlIHVuc3Vic2NyaWJpbmcgZnJvbSAnICsgJ3B1c2ggbWVzc2FnaW5nLicsIGUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gVGhpcyBtZXRob2QgaGFuZGxlcyB0aGUgcmVtb3ZhbCBvZiBzdWJzY3JpcHRpb25JZFxuLy8gaW4gQ2hyb21lIDQ0IGJ5IGNvbmNhdGVuYXRpbmcgdGhlIHN1YnNjcmlwdGlvbiBJZFxuLy8gdG8gdGhlIHN1YnNjcmlwdGlvbiBlbmRwb2ludFxuZnVuY3Rpb24gZW5kcG9pbnRXb3JrYXJvdW5kKHB1c2hTdWJzY3JpcHRpb24pIHtcbiAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgbWVzcyB3aXRoIEdDTVxuICBpZiAocHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludC5pbmRleE9mKCdodHRwczovL2FuZHJvaWQuZ29vZ2xlYXBpcy5jb20vZ2NtL3NlbmQnKSAhPT0gMCkge1xuICAgIHJldHVybiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50O1xuICB9XG5cbiAgdmFyIG1lcmdlZEVuZHBvaW50ID0gcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludDtcbiAgLy8gQ2hyb21lIDQyICsgNDMgd2lsbCBub3QgaGF2ZSB0aGUgc3Vic2NyaXB0aW9uSWQgYXR0YWNoZWRcbiAgLy8gdG8gdGhlIGVuZHBvaW50LlxuICBpZiAocHVzaFN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25JZCAmJiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50LmluZGV4T2YocHVzaFN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25JZCkgPT09IC0xKSB7XG4gICAgLy8gSGFuZGxlIHZlcnNpb24gNDIgd2hlcmUgeW91IGhhdmUgc2VwYXJhdGUgc3ViSWQgYW5kIEVuZHBvaW50XG4gICAgbWVyZ2VkRW5kcG9pbnQgPSBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50ICsgJy8nICsgcHVzaFN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25JZDtcbiAgfVxuICByZXR1cm4gbWVyZ2VkRW5kcG9pbnQ7XG59XG5cbmZ1bmN0aW9uIHNlbmRTdWJzY3JpcHRpb25Ub1NlcnZlcihwdXNoU3Vic2NyaXB0aW9uKSB7XG4gIC8vIFRPRE86IFNlbmQgdGhlIHN1YnNjcmlwdGlvbi5lbmRwb2ludFxuICAvLyB0byB5b3VyIHNlcnZlciBhbmQgc2F2ZSBpdCB0byBzZW5kIGFcbiAgLy8gcHVzaCBtZXNzYWdlIGF0IGEgbGF0ZXIgZGF0ZVxuICBjb25zb2xlLmxvZyhwdXNoU3Vic2NyaXB0aW9uKTtcbiAgdmFyIG1lcmdlZEVuZHBvaW50ID0gZW5kcG9pbnRXb3JrYXJvdW5kKHB1c2hTdWJzY3JpcHRpb24pO1xuICBzb2NrZXQuZW1pdCgnTmV3IFN1YnNjcmlwdGlvbicsIG1lcmdlZEVuZHBvaW50KTtcbiAgY29uc29sZS5sb2coJ1RPRE86IEltcGxlbWVudCBzZW5kU3Vic2NyaXB0aW9uVG9TZXJ2ZXIoKScsIG1lcmdlZEVuZHBvaW50KTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
